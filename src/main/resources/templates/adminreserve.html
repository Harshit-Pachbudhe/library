<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>BookTrack - Admin Search</title>
  <link rel="stylesheet" href="@{https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css}">
  <link rel="stylesheet" th:href="@{/css/adminsearch.css}">
</head>
<body>

  <!-- Sidebar -->
  <div class="sidebar">
      <div>
          <div class="logo">
              <img th:src="@{/images/graduate.gif}" alt="book icon">BookTrack
          </div>
          <div class="menu">
              <a th:href="@{/admindash}" ><i class="fa fa-home"></i> Dashboard </a>
              <a th:href="@{/adminsearch}" class="active"><i class="fa fa-search"></i> Search Books </a>
              <a th:href="@{/adminissueReturn}"><i class="fa fa-exchange-alt"></i> Issue / Return</a>
              <a th:href="@{/adminreserve}"><i class="fa fa-bookmark"></i> Reservations</a>
          </div>
      </div>
      <a th:href="@{/logout}"><i class="fa fa-sign-out"></i> Logout</a>
  </div>

  <!-- Main Content -->
  <div class="main">
      <div class="topbar">
          <!-- Search bar -->
          <input type="text" placeholder="ðŸ” Search books, users..." class="search-bar">

          <!-- Notifications -->
          <div class="notification">
            <a th:href="@{/adminnotif}">
              <i class="fa fa-bell fa-lg"></i>
              <span class="badge" th:text="${notificationCount}">0</span>
            </a>
          </div>

          <!-- Profile (linked to login.html) -->
          <a th:href="@{/adminprofile}" class="profile-link">
              <img th:src="@{/images/profile.webp}" alt="Profile" class="profile-pic">
          </a>
      </div>

      <main class="container">
          <!-- Reservation Table -->
          <section class="card">
              <h2>All Reservations</h2>
              <table id="adminTable">
                  <thead>
                      <tr>
                          <th>#</th>
                          <th>Student Name</th>
                          <th>Book Title</th>
                          <th>Pick-up Date</th>
                          <th>Pick-up Time</th>
                          <th>Return Date</th>
                          <th>Status</th>
                          <th>Action</th>
                      </tr>
                  </thead>
                  <tbody>
                      <tr th:each="reservation, stat : ${reservations}">
                          <td th:text="${stat.index + 1}"></td>
                          <td th:text="${reservation.studentName}"></td>
                          <td th:text="${reservation.bookTitle}"></td>
                          <td th:text="${reservation.pickupDate}"></td>
                          <td th:text="${reservation.pickupTime}"></td>
                          <td th:text="${reservation.returnDate}"></td>
                          <td th:text="${reservation.status}"></td>
                          <td>
                              <a th:href="@{'/admin/delete/' + ${reservation.id}}">Delete</a>
                          </td>
                      </tr>
                      <tr th:if="${#lists.isEmpty(reservations)}">
                          <td colspan="8" style="text-align:center;">No reservations found.</td>
                      </tr>
                  </tbody>
              </table>
          </section>
      </main>
  </div>

  <script th:src="@{/js/adminreserve.js}"></script>
</body>
</html>
